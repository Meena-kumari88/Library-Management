<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        /* Fixed Navbar styles */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            padding: 10px 20px;
            color: white;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        .navbar-left {
            display: flex;
            align-items: center;
        }

        .navbar-logo {
            width: 40px;
            height: auto;
            margin-right: 10px;
        }

        .navbar-text {
            font-size: 20px;
            font-weight: bold;
        }

        .navbar-right {
            display: flex;
            align-items: center;
        }

        .navbar-search-input {
            padding: 5px;
            margin-right: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .navbar-search-button {
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 30px;
        }

        .navbar-search-button:hover {
            background-color: #0056b3;
        }

        /* Add padding to the top of the body to prevent content overlap */
        body {
            padding-top: 50px;
        }

        .custom-container {
            display: flex;
        }

        .custom-left-div {
            width: 13%;
            background-color: black;
            color: white;
            padding: 20px;
            position: fixed;
            height: 100%;
            overflow-y: auto;
        }

        .custom-right-div {
            position: fixed;
            width: 87%;
            margin-left: 15%;
            background-image: url('https://media4.giphy.com/media/3o7WIu0DcVJxQbNWb6/giphy.gif?cid=6c09b952d926vgcg4wiv6va68jbvrgp5f805rhkosfjjqr43&ep=v1_internal_gif_by_id&rid=giphy.gif&ct=g');
            /* Replace with your image path */
            background-size: cover;
            background-position: center;
            padding: 20px;
            overflow-y: auto;
            height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            /* Ensure the heading stays on top */
        }

        /* User profile section */
        .user-profile {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .user-profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #fff;
            color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            margin-right: 10px;
            text-align: center;
        }

        .user-profile-name {
            font-size: 18px;
            font-weight: bold;
        }


        .custom-left-div h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .custom-left-div ul {
            list-style-type: none;
            padding: 0;
        }

        .custom-left-div ul li {
            margin-bottom: 10px;
            font-size: 18px;
            cursor: pointer;
        }

        .custom-left-div ul li:hover {
            text-decoration: underline;
        }

        .custom-right-div h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 10px;
            margin-top: 0;
        }

        .custom-card-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            /* Increased columns for smaller cards */
            gap: 20px;
            width: 100%;
            margin-top: 20px;
            /* Add margin to separate from heading */
        }

        .custom-card {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 10px;
            /* Add a small margin at the bottom to separate the cards slightly */
        }


        .custom-card img {
            width: 100%;
            height: 60%;
            object-fit: cover;
            border-radius: 8px 8px 0 0;
            margin-bottom: 10px;
            /* Reduce spacing below the image */
        }

        .custom-card h3 {
            font-size: 18px;
            margin: 10px 0 5px;
            /* Adjust margins to reduce space */
        }

        .custom-card p {
            font-size: 14px;
            margin-bottom: 10px;
            /* Adjust margins to reduce space */
        }

        .custom-card button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            /* Add some margin to the top if needed */
            margin-bottom: 0;
            /* Remove bottom margin */
        }

        .custom-card button:hover {
            background-color: #0056b3;
        }

        .view-more-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            /* Make sure it takes the full width if needed */
            margin: 20px auto;
            /* Center the button */
            margin-bottom: 4rem;
        }

        .view-more-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-left">
            <img src="logo.jpeg" alt="Logo" class="navbar-logo"> <!-- Replace 'logo.png' with your logo image path -->
            <span class="navbar-text">Library Management</span>
        </div>
        <div class="navbar-right">
            <input type="text" placeholder="Search books..." id="searchInput" class="navbar-search-input">
            <button onclick="searchBooks()" class="navbar-search-button">Search</button>
        </div>
    </nav>

    <div class="custom-container">
        <div class="custom-left-div">
            <!-- User Profile Section -->
            <div class="user-profile">
                <div class="user-profile-icon">
                    <!-- You can use an icon library or replace with an appropriate user icon -->
                    <span>ðŸ‘¤</span>
                </div>
                <div class="user-profile-name">John Doe</div>
            </div>
            <h1>Our Books</h1>
            <ul>
                <!-- Fiction Dropdown -->
                <li id="fiction" onclick="toggleDropdown('fictionGenres')">Fiction Books</li>
                <ul id="fictionGenres" style="display: none; padding-left: 20px;">
                    <li onclick="fetchBooks('Literary Fiction', 'Literary Fiction')">Literary Fiction</li>
                    <li onclick="fetchBooks('Mystery', 'Mystery')">Mystery</li>
                    <li onclick="fetchBooks('Thriller', 'Thriller')">Thriller</li>
                    <li onclick="fetchBooks('Horror', 'Horror')">Horror</li>
                    <li onclick="fetchBooks('Historical Fiction', 'Historical Fiction')">Historical Fiction</li>
                    <li onclick="fetchBooks('Romance', 'Romance')">Romance</li>
                    <li onclick="fetchBooks('Science Fiction', 'Science Fiction')">Science Fiction</li>
                    <li onclick="fetchBooks('Fantasy', 'Fantasy')">Fantasy</li>
                    <li onclick="fetchBooks('Dystopian', 'Dystopian')">Dystopian</li>
                    <li onclick="fetchBooks('Adventure', 'Adventure')">Adventure</li>
                </ul>

                <!-- Non-Fiction Dropdown -->
                <li id="nonfiction" onclick="toggleDropdown('nonFictionGenres')">Non-Fiction Books</li>
                <ul id="nonFictionGenres" style="display: none; padding-left: 20px;">
                    <li onclick="fetchBooks('Biography', 'Biography')">Biography</li>
                    <li onclick="fetchBooks('Autobiography', 'Autobiography')">Autobiography</li>
                    <li onclick="fetchBooks('Memoir', 'Memoir')">Memoir</li>
                    <li onclick="fetchBooks('Self-Help', 'Self-Help')">Self-Help</li>
                    <li onclick="fetchBooks('True Crime', 'True Crime')">True Crime</li>
                    <li onclick="fetchBooks('History', 'History')">History</li>
                    <li onclick="fetchBooks('Philosophy', 'Philosophy')">Philosophy</li>
                    <li onclick="fetchBooks('Science', 'Science')">Science</li>
                    <li onclick="fetchBooks('Business & Economics', 'Business & Economics')">Business & Economics</li>
                    <li onclick="fetchBooks('Travel', 'Travel')">Travel</li>
                </ul>

                <!-- Children's Books Dropdown -->
                <li id="children" onclick="toggleDropdown('childrenGenres')">Children's Books</li>
                <ul id="childrenGenres" style="display: none; padding-left: 20px;">
                    <li onclick="fetchBooks('Picture Books', 'Picture Books')">Picture Books</li>
                    <li onclick="fetchBooks('Early Readers', 'Early Readers')">Early Readers</li>
                    <li onclick="fetchBooks('Middle Grade', 'Middle Grade')">Middle Grade</li>
                    <li onclick="fetchBooks('Young Adult', 'Young Adult (YA)')">Young Adult (YA)</li>
                </ul>

                <!-- Other Genres Dropdown -->
                <li id="other" onclick="toggleDropdown('otherGenres')">Other Genres</li>
                <ul id="otherGenres" style="display: none; padding-left: 20px;">
                    <li onclick="fetchBooks('Poetry', 'Poetry')">Poetry</li>
                    <li onclick="fetchBooks('Graphic Novels & Comics', 'Graphic Novels & Comics')">Graphic Novels &
                        Comics</li>
                    <li onclick="fetchBooks('Short Stories', 'Short Stories')">Short Stories</li>
                    <li onclick="fetchBooks('Anthology', 'Anthology')">Anthology</li>
                    <li onclick="fetchBooks('Classics', 'Classics')">Classics</li>
                    <li onclick="fetchBooks('Spirituality & Religion', 'Spirituality & Religion')">Spirituality &
                        Religion</li>
                    <li onclick="fetchBooks('Cookbooks', 'Cookbooks')">Cookbooks</li>
                    <li onclick="fetchBooks('Art & Photography', 'Art & Photography')">Art & Photography</li>
                    <li onclick="fetchBooks('Health & Fitness', 'Health & Fitness')">Health & Fitness</li>
                    <li onclick="fetchBooks('Home & Garden', 'Home & Garden')">Home & Garden</li>
                    <li onclick="fetchBooks('Humor', 'Humor')">Humor</li>
                    <li onclick="fetchBooks('Politics & Social Sciences', 'Politics & Social Sciences')">Politics &
                        Social Sciences</li>
                    <li onclick="fetchBooks('Education & Reference', 'Education & Reference')">Education & Reference
                    </li>
                    <li onclick="fetchBooks('Sports & Outdoors', 'Sports & Outdoors')">Sports & Outdoors</li>
                    <li onclick="fetchBooks('Technology & Computers', 'Technology & Computers')">Technology & Computers
                    </li>

                </ul>
            </ul>

        </div>
        <div class="custom-right-div" id="welcome-section">
            <h2 id="custom-right-heading">Hello User, Welcome</h2>
            <div id="custom-card-grid" class="custom-card-grid">
                <!-- Book cards will be dynamically added here -->
            </div>
            <button id="viewMoreButton" class="view-more-button" onclick="viewMoreBooks()" style="display: none;">View
                More</button>
        </div>

    </div>
    <script>
        const apiKey = "AIzaSyAYlD0MXFtLsMonDeYVgiy8EJjZmpBDo9A"; // Replace with your actual Google Books API key
        let startIndex = 0; // Initialize start index for pagination
        let currentCategory = ''; // Store the current category for fetching more books

        // Function to search books
        function searchBooks() {
            const query = document.getElementById('searchInput').value;
            if (query) {
                startIndex = 0; // Reset start index for a new search
                fetchBooks(query, query + ' Books');
            }
        }

        // Event listener for the 'Enter' key
        document.getElementById('searchInput').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                searchBooks();
            }
        });

        // Function to fetch books from Google Books API
        function fetchBooks(category, displayCategory) {
            const customRightDiv = document.querySelector('.custom-right-div');
            customRightDiv.style.backgroundImage = 'none'; // Remove background image when books are loaded
            const customRightHeading = document.getElementById('custom-right-heading');
            customRightHeading.textContent = `Loading books...`; // Optional loading text

            // Store current category for loading more books
            currentCategory = category;

            // Fetch books from the Google Books API
            const url = `https://www.googleapis.com/books/v1/volumes?q=${category}&key=${apiKey}&startIndex=${startIndex}&maxResults=12`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    updateBooks(data.items, displayCategory);
                    toggleViewMoreButton(data.totalItems > startIndex + 9); // Show button if more books are available
                })
                .catch(error => console.error('Error fetching books:', error));
        }

        // Function to update books in the UI
        function updateBooks(books, displayCategory) {
            const customRightHeading = document.getElementById('custom-right-heading');
            const customCardGrid = document.querySelector('.custom-card-grid');

            if (startIndex === 0) {
                // Clear previous book cards only if it's a new search
                customCardGrid.innerHTML = '';
            }

            // Update heading to show the clicked category name
            customRightHeading.textContent = `Books related to ${displayCategory}`;

            // Loop through the books and create new book cards
            books.forEach(book => {
                const bookInfo = book.volumeInfo;

                // Create a new div element for the book card
                const cardDiv = document.createElement('div');
                cardDiv.className = 'custom-card';

                // Create an image element for the book cover
                const bookCover = document.createElement('img');
                bookCover.src = bookInfo.imageLinks ? bookInfo.imageLinks.thumbnail : 'https://via.placeholder.com/128x192?text=No+Image';
                bookCover.alt = bookInfo.title;

                // Create an h3 element for the book title
                const bookTitle = document.createElement('h3');
                bookTitle.textContent = bookInfo.title;

                // Create a p element for the author's name
                const bookAuthor = document.createElement('p');
                bookAuthor.textContent = bookInfo.authors ? `Author: ${bookInfo.authors.join(', ')}` : 'Author: Unknown';
                bookAuthor.style.fontStyle = 'italic'; // Optional: style to differentiate author name

                // Create a p element for the publication year
                const bookYear = document.createElement('p');
                bookYear.textContent = bookInfo.publishedDate ? `Published: ${bookInfo.publishedDate.split('-')[0]}` : 'Published: N/A';
                bookYear.style.fontSize = '14px'; // Optional: smaller font for less emphasis

                // Create a p element for the book description
                const bookDescription = document.createElement('p');
                bookDescription.textContent = bookInfo.description ? bookInfo.description.substring(0, 100) + '...' : 'No description available';

                // Create a button element
                const readMoreButton = document.createElement('button');
                readMoreButton.textContent = 'Read More';
                readMoreButton.onclick = () => window.open(bookInfo.infoLink, '_blank');

                // Append all elements to the card div
                cardDiv.appendChild(bookCover);
                cardDiv.appendChild(bookTitle);
                cardDiv.appendChild(bookAuthor);
                cardDiv.appendChild(bookYear);
                cardDiv.appendChild(bookDescription);
                cardDiv.appendChild(readMoreButton);

                // Append the card div to the card grid
                customCardGrid.appendChild(cardDiv);
            });
        }

        // Function to handle "View More" button click
        function viewMoreBooks() {
            startIndex += 9; // Increment the start index to load more books
            fetchBooks(currentCategory, currentCategory + ' Books');
        }

        // Function to toggle "View More" button visibility
        function toggleViewMoreButton(show) {
            const viewMoreButton = document.getElementById('viewMoreButton');
            viewMoreButton.style.display = show ? 'block' : 'none';
        }

        function toggleDropdown(id) {
            const dropdown = document.getElementById(id);
            const displayStyle = dropdown.style.display;

            // Hide all dropdowns first
            const allDropdowns = document.querySelectorAll('ul[id$="Genres"]');
            allDropdowns.forEach(dd => dd.style.display = 'none');

            // Toggle the selected dropdown
            dropdown.style.display = displayStyle === 'none' ? 'block' : 'none';
        }

    </script>
</body>

</html>